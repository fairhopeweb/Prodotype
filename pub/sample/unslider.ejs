<!-- preview -->
<!-- just the 1st image 100% size -->
<div class="prodotype-preview prodotype-force-size">
  <% if(slides && slides.length) { %>
    <div style="<% if(slides[0].bgColor) { %>background-color: <%= slides[0].bgColor %>; <% } %> <% if(slides[0].color) { %>color:<%= slides[0].color %>; <% } %><% if(slides[0].image && slides[0].image[0]) { %>background-image:url('<%= slides[0].image[0].url %>'); background-repeat: no-repeat; background-size: cover; background-position: 50%; <% } %> width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
      <p>~ Preview ~</p>
    </div>
  <% } %>
</div>
<!-- runtime -->
<!-- the whole slideshow -->
<div class="prodotype-runtime" id="<%= uid %>">
  <ul>
  <% for(var idx in slides) { %>
    <li style="<% if(slides[idx].bgColor) { %>background-color: <%= slides[idx].bgColor %>; <% } %> <% if(slides[idx].color) { %>color:<%= slides[idx].color %>; <% } %><% if(slides[idx].image && slides[idx].image[0]) { %>background-image:url('<%= slides[idx].image[0].url %>'); background-repeat: no-repeat; background-size: cover; background-position: 50%;<% } %>">
      <% if(slides[idx].text) { %><%- slides[idx].text %><% } %>
    </li>
  <% } %>
  </ul>
</div>
<script type="text/javascript">
  (function() {
    function initUnslider() {
      var slider = $('#<%= uid %>').unslider({
        "autoplay": <%= autoplay %>,
        "speed": <%= speed %>,
        "delay": <%= delay %>,
        "index": <%= index %>,
        "nav": <%= nav %>,
        "arrows": <%= arrows %>,
        "activeClass": "<%= activeClass %>"
      }
      //  Listen to slide changes
      <% if(onchange) { %>
      slider.on('unslider.change', function(event, index, slide) {
        <%= onchange %>
      });
    <% } %>
    }
    initUnslider();
  })();
  // TODO: expose initUnslider and use it each time we refresh
</script>
